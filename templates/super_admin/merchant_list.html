{% load static %}
<!DOCTYPE html>
<html lang="en" class="light-style layout-menu-fixed">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Merchant List - Sneat Admin</title>
  <meta name="description" content="" />
  <link rel="icon" type="image/x-icon" href="{% static 'assets/img/favicon/favicon.ico' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'assets/vendor/fonts/boxicons.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/vendor/css/core.css' %}" class="template-customizer-core-css" />
  <link rel="stylesheet" href="{% static 'assets/vendor/css/theme-default.css' %}" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />
  <script src="{% static 'assets/vendor/js/helpers.js' %}"></script>
  <script src="{% static 'assets/js/config.js' %}"></script>
</head>

<body>
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="index.html" class="app-brand-link">
            <span class="app-brand-logo demo">
              <svg width="25" viewBox="0 0 25 42" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                  <path d="M13.7918663,0.358365126 L3.39788168,7.44144159 C0.566865006,9.69408886 -0.379795268,12.4788597 0.557900856,15.7960551 C0.68998853,16.2305145 1.09562888,17.7872135 3.12357276,19.2293357 C3.8146334,19.7207684 5.32369333,20.3834223 7.65075054,21.2172976 L7.59773219,21.2522414 L2.63468769,24.5490183 C0.445452254,26.3002125 0.0884951797,28.5083815 0.536877219,30.6580083 C2.46601119,36.3277862 8.67584563,39.4889757 15.0401151,39.4889757 C19.7075769,39.4889757 23.8829364,37.8370302 25.7910722,34.3638772 C26.6734804,32.8126596 26.6734804,30.4696992 26.6734804,28.1267388 C26.6734804,26.7600155 26.6734804,25.3963062 26.6734804,24.0325968 L26.6734804,12.7918663 C26.6734804,11.4281569 26.6734804,10.0644476 26.6734804,8.70073823 C26.6734804,6.31787731 26.6734804,3.93501638 26.6734804,1.55215546 C26.6734804,1.29815966 26.6734804,1.04416386 26.6734804,0.790168061 C26.6734804,0.386174061 26.6734804,0.182177061 26.6734804,0.0781789606 C26.6734804,0.0261799606 26.6734804,0 26.6734804,0 L13.7918663,0 Z" id="path-1"></path>
                  <path d="M15.7918663,0.358365126 L5.39788168,7.44144159 C2.566865006,9.69408886 1.620134732,12.4788597 2.557900856,15.7960551 C2.68998853,16.2305145 3.09562888,17.7872135 5.12357276,19.2293357 C5.8146334,19.7207684 7.32369333,20.3834223 9.65075054,21.2172976 L9.59773219,21.2522414 L4.63468769,24.5490183 C2.445452254,26.3002125 2.0884951797,28.5083815 2.536877219,30.6580083 C4.46601119,36.3277862 10.6758456,39.4889757 17.0401151,39.4889757 C21.7075769,39.4889757 25.8829364,37.8370302 27.7910722,34.3638772 C28.6734804,32.8126596 28.6734804,30.4696992 28.6734804,28.1267388 C28.6734804,26.7600155 28.6734804,25.3963062 28.6734804,24.0325968 L28.6734804,12.7918663 C28.6734804,11.4281569 28.6734804,10.0644476 28.6734804,8.70073823 C28.6734804,6.31787731 28.6734804,3.93501638 28.6734804,1.55215546 C28.6734804,1.29815966 28.6734804,1.04416386 28.6734804,0.790168061 C28.6734804,0.386174061 28.6734804,0.182177061 28.6734804,0.0781789606 C28.6734804,0.0261799606 28.6734804,0 28.6734804,0 L15.7918663,0 Z" id="path-2"></path>
                  <path d="M17.7918663,0.358365126 L7.39788168,7.44144159 C4.566865006,9.69408886 3.620134732,12.4788597 4.557900856,15.7960551 C4.68998853,16.2305145 5.09562888,17.7872135 7.12357276,19.2293357 C7.8146334,19.7207684 9.32369333,20.3834223 11.6507505,21.2172976 L11.5977322,21.2522414 L6.63468769,24.5490183 C4.445452254,26.3002125 4.0884951797,28.5083815 4.536877219,30.6580083 C6.46601119,36.3277862 12.6758456,39.4889757 19.0401151,39.4889757 C23.7075769,39.4889757 27.8829364,37.8370302 29.7910722,34.3638772 C30.6734804,32.8126596 30.6734804,30.4696992 30.6734804,28.1267388 C30.6734804,26.7600155 30.6734804,25.3963062 30.6734804,24.0325968 L30.6734804,12.7918663 C30.6734804,11.4281569 30.6734804,10.0644476 30.6734804,8.70073823 C30.6734804,6.31787731 30.6734804,3.93501638 30.6734804,1.55215546 C30.6734804,1.29815966 30.6734804,1.04416386 30.6734804,0.790168061 C30.6734804,0.386174061 30.6734804,0.182177061 30.6734804,0.0781789606 C30.6734804,0.0261799606 30.6734804,0 30.6734804,0 L17.7918663,0 Z" id="path-3"></path>
                </defs>
                <g id="g-app-brand" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="Brand-Logo" transform="translate(-27.000000, -15.000000)">
                    <g id="Icon" transform="translate(27.000000, 15.000000)">
                      <g id="Mask" transform="translate(0.000000, 8.000000)">
                        <mask id="mask-2" fill="white">
                          <use xlink:href="#path-1"></use>
                        </mask>
                        <use fill="#696cff" xlink:href="#path-1"></use>
                        <g id="Path-3" mask="url(#mask-2)">
                          <use fill="#696cff" xlink:href="#path-2"></use>
                          <use fill-opacity="0.2" fill="#FFFFFF" xlink:href="#path-2"></use>
                        </g>
                        <g id="Path-4" mask="url(#mask-2)">
                          <use fill="#696cff" xlink:href="#path-3"></use>
                          <use fill-opacity="0.2" fill="#FFFFFF" xlink:href="#path-3"></use>
                        </g>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </span>
            <span class="app-brand-text demo menu-text fw-bolder ms-2">Sneat</span>
          </a>

          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
          </a>
        </div>

        <div class="menu-inner-shadow"></div>

        <ul class="menu-inner py-1">
          <li class="menu-item">
            <a href="{{ url('super_admin_dashboard') }}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-home-circle"></i>
              <div data-i18n="Analytics">Dashboard</div>
            </a>
          </li>
          <li class="menu-item active">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-layout"></i>
              <div data-i18n="Layouts">Merchant Management</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item active">
                <a href="{{ url('merchant_list') }}" class="menu-link">
                  <div data-i18n="Without menu">View All Merchants</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="{{ url('merchant_add') }}" class="menu-link">
                  <div data-i18n="Without navbar">Add Merchant</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-layout"></i>
              <div data-i18n="Layouts">Transactions</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="{{ url('transaction_list') }}" class="menu-link">
                  <div data-i18n="Without menu">View All Transactions</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="{{ url('transaction_add') }}" class="menu-link">
                  <div data-i18n="Without navbar">Add Transaction</div>
                </a>
              </li>
            </ul>
          </li>
          <li class="menu-item">
            <a href="{{ url('reports') }}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-chart"></i>
              <div data-i18n="Analytics">Reports</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-layout"></i>
              <div data-i18n="Layouts">Settings</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="{{ url('settings_profile') }}" class="menu-link">
                  <div data-i18n="Without menu">Profile</div>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </aside>

      <div class="layout-page">
        <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached" id="layout-navbar">
          <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
            <div class="navbar-nav align-items-center">
              <div class="nav-item d-flex align-items-center">
                <i class="bx bx-search fs-4 lh-0"></i>
                <input type="text" class="form-control border-0 shadow-none" placeholder="Search..." aria-label="Search..." />
              </div>
            </div>

            <ul class="navbar-nav flex-row align-items-center ms-auto">
              <li class="nav-item navbar-dropdown dropdown-user dropdown">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                  <div class="d-flex">
                    <div class="flex-shrink-0 me-3">
                      <div class="avatar avatar-online">
                        <img src="{% static 'assets/img/avatars/1.png' %}" alt class="w-px-40 h-auto rounded-circle" />
                      </div>
                    </div>
                    <div class="flex-grow-1">
                      <span class="fw-semibold d-block">Super Admin</span>
                      <small class="text-muted">Administrator</small>
                    </div>
                  </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="#">
                      <div class="d-flex">
                        <div class="flex-shrink-0 me-3">
                          <div class="avatar avatar-online">
                            <img src="{% static 'assets/img/avatars/1.png' %}" alt class="w-px-40 h-auto rounded-circle" />
                          </div>
                        </div>
                        <div class="flex-grow-1">
                          <span class="fw-semibold d-block">Super Admin</span>
                          <small class="text-muted">admin@gmail.com</small>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="{{ url('settings_profile') }}">
                      <i class="bx bx-user me-2"></i>
                      <span class="align-middle">My Profile</span>
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="{{ url('logout') }}">
                      <i class="bx bx-power-off me-2"></i>
                      <span class="align-middle">Log Out</span>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>

        <div class="container-xxl flex-grow-1 container-p-y">
          <h4 class="py-3 mb-4">
            <span class="text-muted fw-light">Merchant Management /</span> All Merchants
          </h4>

          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0">Merchant List</h5>
                  <a href="{{ url('merchant_add') }}" class="btn btn-primary">Add New Merchant</a>
                </div>
                <div class="card-body">
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <form method="get" class="d-flex">
                        <input type="text" name="search" class="form-control me-2" placeholder="Search merchants..." value="{{ search_query }}">
                        <button type="submit" class="btn btn-outline-primary">Search</button>
                      </form>
                    </div>
                    <div class="col-md-6">
                      <form method="get" class="d-flex">
                        <select name="status" class="form-select me-2">
                          <option value="">All Status</option>
                          <option value="active" {{ 'selected' if status_filter == 'active' }}>Active</option>
                          <option value="inactive" {{ 'selected' if status_filter == 'inactive' }}>Inactive</option>
                        </select>
                        <button type="submit" class="btn btn-outline-secondary">Filter</button>
                      </form>
                    </div>
                  </div>

                  <div class="table-responsive text-nowrap">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>User</th>
                          <th>Business Name</th>
                          <th>Status</th>
                          <th>Created</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody class="table-border-bottom-0">
                        {% for merchant in page_obj %}
                        <tr>
                          <td>{{ merchant.id }}</td>
                          <td>
                            <div class="d-flex justify-content-start align-items-center">
                              <div class="avatar-wrapper">
                                <div class="avatar avatar-sm me-3">
                                  <span class="avatar-initial rounded-circle bg-label-primary">{{ merchant.user.first_name|first }}{{ merchant.user.last_name|first }}</span>
                                </div>
                              </div>
                              <div class="d-flex flex-column">
                                <span class="fw-semibold">{{ merchant.user.get_full_name }}</span>
                                <small class="text-muted">{{ merchant.user.email }}</small>
                              </div>
                            </div>
                          </td>
                          <td>{{ merchant.business_name }}</td>
                          <td>
                            <span class="badge {% if merchant.status == 'active' %}bg-success{% else %}bg-danger{% endif %}">
                              {{ merchant.status|title }}
                            </span>
                          </td>
                          <td>{{ merchant.created_at|date:"M d, Y" }}</td>
                          <td>
                            <div class="dropdown">
                              <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>
                              <div class="dropdown-menu">
                                <a class="dropdown-item" href="{{ url('merchant_edit', merchant.id) }}">
                                  <i class="bx bx-edit-alt me-1"></i> Edit
                                </a>
                                <a class="dropdown-item" href="{{ url('merchant_toggle_status', merchant.id) }}">
                                  <i class="bx bx-toggle-{{ 'right' if merchant.status == 'active' else 'left' }} me-1"></i> 
                                  {{ 'Deactivate' if merchant.status == 'active' else 'Activate' }}
                                </a>
                                <a class="dropdown-item text-danger" href="{{ url('merchant_delete', merchant.id) }}">
                                  <i class="bx bx-trash me-1"></i> Delete
                                </a>
                              </div>
                            </div>
                          </td>
                        </tr>
                        {% empty %}
                        <tr>
                          <td colspan="6" class="text-center">No merchants found</td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>

                  {% if page_obj.has_other_pages %}
                  <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center">
                      {% if page_obj.has_previous %}
                        <li class="page-item">
                          <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if status_filter %}&status={{ status_filter }}{% endif %}">
                            <i class="tf-icon bx bx-chevron-left"></i>
                          </a>
                        </li>
                      {% endif %}

                      {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                          <li class="page-item active">
                            <span class="page-link">{{ num }}</span>
                          </li>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                          <li class="page-item">
                            <a class="page-link" href="?page={{ num }}{% if search_query %}&search={{ search_query }}{% endif %}{% if status_filter %}&status={{ status_filter }}{% endif %}">{{ num }}</a>
                          </li>
                        {% endif %}
                      {% endfor %}

                      {% if page_obj.has_next %}
                        <li class="page-item">
                          <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if status_filter %}&status={{ status_filter }}{% endif %}">
                            <i class="tf-icon bx bx-chevron-right"></i>
                          </a>
                        </li>
                      {% endif %}
                    </ul>
                  </nav>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>

        <footer class="content-footer footer bg-footer-theme">
          <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
            <div class="mb-2 mb-md-0">
              ©
              <script>
                document.write(new Date().getFullYear());
              </script>
              , made with ❤️ by
              <a href="https://themeselection.com" target="_blank" class="footer-link fw-bolder">ThemeSelection</a>
            </div>
          </div>
        </footer>

        <div class="content-backdrop fade"></div>
      </div>
    </div>

    <div class="layout-overlay layout-menu-toggle"></div>

    <div class="drag-target"></div>
  </div>

  <script src="{% static 'assets/vendor/libs/jquery/jquery.js' %}"></script>
  <script src="{% static 'assets/vendor/libs/popper/popper.js' %}"></script>
  <script src="{% static 'assets/vendor/js/bootstrap.js' %}"></script>
  <script src="{% static 'assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
  <script src="{% static 'assets/vendor/js/menu.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>
</body>
</html>
